{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Downloads\\\\stora-next-20220617T154210Z-001\\\\stora-next\\\\stora\\\\src\\\\components\\\\product\\\\Product.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport Link from \"next/link\";\nimport { Rate, Button, Tooltip, Skeleton, message, Modal, Spin } from \"antd\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport classNames from \"classnames\";\nimport { formatCurrency } from \"../../common/utils\";\nimport { checkProductInWishlist, checkAvaiableQuantityToAdd } from \"../../common/shopUtils\";\nimport { addToCart } from \"../../redux/actions/cartActions\";\nimport { addToWishlist, removeFromWishlist } from \"../../redux/actions/wishlistActions\";\nimport ShopQuickView from \"../shop/ShopQuickView\";\n\nfunction Product({\n  data,\n  productStyle\n}) {\n  const dispatch = useDispatch();\n  const {\n    0: visible,\n    1: setVisible\n  } = useState(false);\n  const {\n    0: imageLoading,\n    1: setImageLoading\n  } = useState(true);\n  const globalState = useSelector(state => state.globalReducer);\n  const cartState = useSelector(state => state.cartReducer);\n  const wishlistState = useSelector(state => state.wishlistReducer);\n  const productInWishlist = checkProductInWishlist(wishlistState, data.id);\n  const avaiableQuantity = checkAvaiableQuantityToAdd(cartState, data);\n  const {\n    currency,\n    locales\n  } = globalState.currency;\n  useEffect(() => {\n    setImageLoading(true);\n  }, [globalState.category]);\n\n  const renderProductType = () => {\n    if (data.discount && !data.isNew) {\n      return __jsx(\"p\", {\n        className: \"product-type -sale\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 14\n        }\n      }, \"Sale\");\n    } else if (data.isNew && !data.discount) {\n      return __jsx(\"p\", {\n        className: \"product-type -new\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 14\n        }\n      }, \"New\");\n    } else if (data.isNew && data.discount) {\n      return __jsx(\"p\", {\n        className: \"product-type -new\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 14\n        }\n      }, \"New\");\n    } else {\n      return null;\n    }\n  };\n\n  console.log(avaiableQuantity);\n\n  const onAddToCart = data => {\n    if (avaiableQuantity === 0) {\n      return;\n    }\n\n    dispatch(addToCart(data, 1, \"none\", \"none\"));\n    message.success(\"Product added to cart successfully\");\n  };\n\n  const onAddToWishlist = data => {\n    if (productInWishlist) {\n      dispatch(removeFromWishlist(data.id));\n      return message.error(\"Product removed from wishlist\");\n    } else {\n      dispatch(addToWishlist(data));\n      return message.success(\"Product added to wishlist successfully\");\n    }\n  };\n\n  const renderStyleClass = () => {\n    const avaialeStyles = [\"one\", \"two\", \"three\"];\n\n    if (avaialeStyles.includes(productStyle)) {\n      if (!productStyle || productStyle === \"one\") {\n        return \"-style-one\";\n      } else {\n        return \"-style-\" + productStyle;\n      }\n    } else {\n      return \"-style-one\";\n    }\n  };\n\n  const showModal = () => {\n    setVisible(true);\n  };\n\n  const handleCancel = e => {\n    setVisible(false);\n  };\n\n  const handleImageLoaded = () => {\n    setImageLoading(false);\n  };\n\n  return data ? __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: `product ${renderStyleClass()}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"product-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, __jsx(Link, {\n    href: process.env.PUBLIC_URL + `/product/[slug]`,\n    as: process.env.PUBLIC_URL + `/product/${data.slug}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }, __jsx(\"a\", {\n    className: classNames({\n      loading: imageLoading\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, data.thumbImage && data.thumbImage.map((item, index) => __jsx(\"img\", {\n    onLoad: handleImageLoaded,\n    key: index,\n    src: item,\n    alt: \"Product image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 19\n    }\n  })))), imageLoading && __jsx(\"div\", {\n    className: \"product-image-loading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, __jsx(Spin, {\n    size: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }\n  })), renderProductType(), productStyle === \"two\" ? __jsx(\"div\", {\n    className: \"product-button-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, __jsx(Tooltip, {\n    title: \"Quick view\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 15\n    }\n  }, __jsx(Button, {\n    onClick: showModal,\n    type: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }, __jsx(\"i\", {\n    className: \"icon_search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 19\n    }\n  }))), __jsx(Tooltip, {\n    title: productInWishlist ? \"Remove from wishlist\" : \"Add to wishlist\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 15\n    }\n  }, __jsx(Button, {\n    className: `product-atw ${classNames({\n      active: productInWishlist\n    })}`,\n    type: \"text\",\n    onClick: () => onAddToWishlist(data),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }\n  }, __jsx(\"i\", {\n    className: \"icon_heart_alt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 19\n    }\n  }))), __jsx(Tooltip, {\n    title: \"Add to cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 15\n    }\n  }, __jsx(Button, {\n    disabled: avaiableQuantity === 0,\n    type: \"text\",\n    onClick: () => onAddToCart(data),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }, __jsx(\"i\", {\n    className: \"icon_bag_alt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 19\n    }\n  })))) : null, !productStyle || productStyle === \"one\" ? __jsx(React.Fragment, null, __jsx(Tooltip, {\n    placement: \"left\",\n    title: productInWishlist ? \"Remove from wishlist\" : \"Add to wishlist\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 15\n    }\n  }, __jsx(Button, {\n    className: `product-atw ${classNames({\n      active: productInWishlist\n    })}`,\n    type: \"text\",\n    shape: \"circle\",\n    onClick: () => onAddToWishlist(data),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 17\n    }\n  }, __jsx(\"i\", {\n    className: \"icon_heart_alt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 19\n    }\n  }))), __jsx(Button, {\n    onClick: showModal,\n    className: \"product-qv\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 15\n    }\n  }, \"Quick view\")) : null), __jsx(\"div\", {\n    className: \"product-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  }, __jsx(Link, {\n    href: process.env.PUBLIC_URL + `/product/[slug]`,\n    as: process.env.PUBLIC_URL + `/product/${data.slug}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 11\n    }\n  }, __jsx(\"a\", {\n    className: \"product-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }\n  }, data.name)), __jsx(\"div\", {\n    className: \"product-rate\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 11\n    }\n  }, __jsx(Rate, {\n    defaultValue: data.rate,\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }\n  }), __jsx(\"span\", {\n    className: \"product-rate-quantity\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }\n  }, \"(06)\")), __jsx(\"div\", {\n    className: \"product-content__footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"product-content__footer-price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }\n  }, __jsx(\"h5\", {\n    className: \"product-price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 15\n    }\n  }, data.discount ? formatCurrency(data.price - data.discount, locales, currency) : formatCurrency(data.price, locales, currency)), data.discount && __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 17\n    }\n  }, formatCurrency(data.price, locales, currency))), !productStyle || productStyle === \"one\" ? __jsx(Tooltip, {\n    title: \"Add to cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 15\n    }\n  }, __jsx(Button, {\n    disabled: avaiableQuantity === 0,\n    className: \"product-atc\",\n    type: \"text\",\n    shape: \"circle\",\n    onClick: () => onAddToCart(data),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 17\n    }\n  }, __jsx(\"i\", {\n    className: \"icon_bag_alt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 19\n    }\n  }))) : null), productStyle === \"three\" ? __jsx(\"div\", {\n    className: \"product-button-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"product-button-group__wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 15\n    }\n  }, __jsx(Tooltip, {\n    placement: \"top\",\n    title: \"Quick view\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 17\n    }\n  }, __jsx(Button, {\n    onClick: showModal,\n    shape: \"circle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 19\n    }\n  }, __jsx(\"i\", {\n    className: \"icon_search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 21\n    }\n  }))), __jsx(Tooltip, {\n    placement: \"top\",\n    title: productInWishlist ? \"Remove from wishlist\" : \"Add to wishlist\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 17\n    }\n  }, __jsx(Button, {\n    shape: \"circle\",\n    className: `product-atw ${classNames({\n      active: productInWishlist\n    })}`,\n    onClick: () => onAddToWishlist(data),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 19\n    }\n  }, __jsx(\"i\", {\n    className: \"icon_heart_alt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 21\n    }\n  }))), __jsx(Tooltip, {\n    placement: \"top\",\n    title: \"Add to cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 17\n    }\n  }, __jsx(Button, {\n    disabled: avaiableQuantity === 0,\n    shape: \"circle\",\n    onClick: () => onAddToCart(data),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 19\n    }\n  }, __jsx(\"i\", {\n    className: \"icon_bag_alt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 21\n    }\n  }))))) : null)), __jsx(Modal, {\n    footer: null,\n    afterClose: handleCancel,\n    onCancel: handleCancel,\n    visible: visible,\n    width: 850,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 7\n    }\n  }, __jsx(ShopQuickView, {\n    setModalVisible: setVisible,\n    data: data,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 9\n    }\n  }))) : __jsx(Skeleton, {\n    active: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 5\n    }\n  });\n}\n\nexport default React.memo(Product);","map":{"version":3,"sources":["C:/Users/user/Downloads/stora-next-20220617T154210Z-001/stora-next/stora/src/components/product/Product.js"],"names":["React","useState","useEffect","Link","Rate","Button","Tooltip","Skeleton","message","Modal","Spin","useSelector","useDispatch","classNames","formatCurrency","checkProductInWishlist","checkAvaiableQuantityToAdd","addToCart","addToWishlist","removeFromWishlist","ShopQuickView","Product","data","productStyle","dispatch","visible","setVisible","imageLoading","setImageLoading","globalState","state","globalReducer","cartState","cartReducer","wishlistState","wishlistReducer","productInWishlist","id","avaiableQuantity","currency","locales","category","renderProductType","discount","isNew","console","log","onAddToCart","success","onAddToWishlist","error","renderStyleClass","avaialeStyles","includes","showModal","handleCancel","e","handleImageLoaded","process","env","PUBLIC_URL","slug","loading","thumbImage","map","item","index","active","name","rate","price","memo"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { Rate, Button, Tooltip, Skeleton, message, Modal, Spin } from \"antd\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport classNames from \"classnames\";\r\n\r\nimport { formatCurrency } from \"../../common/utils\";\r\nimport {\r\n  checkProductInWishlist,\r\n  checkAvaiableQuantityToAdd,\r\n} from \"../../common/shopUtils\";\r\nimport { addToCart } from \"../../redux/actions/cartActions\";\r\nimport {\r\n  addToWishlist,\r\n  removeFromWishlist,\r\n} from \"../../redux/actions/wishlistActions\";\r\nimport ShopQuickView from \"../shop/ShopQuickView\";\r\n\r\nfunction Product({ data, productStyle }) {\r\n  const dispatch = useDispatch();\r\n  const [visible, setVisible] = useState(false);\r\n  const [imageLoading, setImageLoading] = useState(true);\r\n  const globalState = useSelector((state) => state.globalReducer);\r\n  const cartState = useSelector((state) => state.cartReducer);\r\n  const wishlistState = useSelector((state) => state.wishlistReducer);\r\n  const productInWishlist = checkProductInWishlist(wishlistState, data.id);\r\n  const avaiableQuantity = checkAvaiableQuantityToAdd(cartState, data);\r\n  const { currency, locales } = globalState.currency;\r\n  useEffect(() => {\r\n    setImageLoading(true);\r\n  }, [globalState.category]);\r\n  const renderProductType = () => {\r\n    if (data.discount && !data.isNew) {\r\n      return <p className=\"product-type -sale\">Sale</p>;\r\n    } else if (data.isNew && !data.discount) {\r\n      return <p className=\"product-type -new\">New</p>;\r\n    } else if (data.isNew && data.discount) {\r\n      return <p className=\"product-type -new\">New</p>;\r\n    } else {\r\n      return null;\r\n    }\r\n  };\r\n  console.log(avaiableQuantity);\r\n  const onAddToCart = (data) => {\r\n    if (avaiableQuantity === 0) {\r\n      return;\r\n    }\r\n    dispatch(addToCart(data, 1, \"none\", \"none\"));\r\n    message.success(\"Product added to cart successfully\");\r\n  };\r\n  const onAddToWishlist = (data) => {\r\n    if (productInWishlist) {\r\n      dispatch(removeFromWishlist(data.id));\r\n      return message.error(\"Product removed from wishlist\");\r\n    } else {\r\n      dispatch(addToWishlist(data));\r\n      return message.success(\"Product added to wishlist successfully\");\r\n    }\r\n  };\r\n  const renderStyleClass = () => {\r\n    const avaialeStyles = [\"one\", \"two\", \"three\"];\r\n    if (avaialeStyles.includes(productStyle)) {\r\n      if (!productStyle || productStyle === \"one\") {\r\n        return \"-style-one\";\r\n      } else {\r\n        return \"-style-\" + productStyle;\r\n      }\r\n    } else {\r\n      return \"-style-one\";\r\n    }\r\n  };\r\n  const showModal = () => {\r\n    setVisible(true);\r\n  };\r\n  const handleCancel = (e) => {\r\n    setVisible(false);\r\n  };\r\n  const handleImageLoaded = () => {\r\n    setImageLoading(false);\r\n  };\r\n  return data ? (\r\n    <>\r\n      <div className={`product ${renderStyleClass()}`}>\r\n        <div className=\"product-image\">\r\n          <Link\r\n            href={process.env.PUBLIC_URL + `/product/[slug]`}\r\n            as={process.env.PUBLIC_URL + `/product/${data.slug}`}\r\n          >\r\n            <a className={classNames({ loading: imageLoading })}>\r\n              {data.thumbImage &&\r\n                data.thumbImage.map((item, index) => (\r\n                  <img\r\n                    onLoad={handleImageLoaded}\r\n                    key={index}\r\n                    src={item}\r\n                    alt=\"Product image\"\r\n                  />\r\n                ))}\r\n            </a>\r\n          </Link>\r\n          {imageLoading && (\r\n            <div className=\"product-image-loading\">\r\n              <Spin size=\"large\" />\r\n            </div>\r\n          )}\r\n          {renderProductType()}\r\n          {productStyle === \"two\" ? (\r\n            <div className=\"product-button-group\">\r\n              <Tooltip title=\"Quick view\">\r\n                <Button onClick={showModal} type=\"text\">\r\n                  <i className=\"icon_search\" />\r\n                </Button>\r\n              </Tooltip>\r\n              <Tooltip\r\n                title={\r\n                  productInWishlist ? \"Remove from wishlist\" : \"Add to wishlist\"\r\n                }\r\n              >\r\n                <Button\r\n                  className={`product-atw ${classNames({\r\n                    active: productInWishlist,\r\n                  })}`}\r\n                  type=\"text\"\r\n                  onClick={() => onAddToWishlist(data)}\r\n                >\r\n                  <i className=\"icon_heart_alt\" />\r\n                </Button>\r\n              </Tooltip>\r\n              <Tooltip title=\"Add to cart\">\r\n                <Button\r\n                  disabled={avaiableQuantity === 0}\r\n                  type=\"text\"\r\n                  onClick={() => onAddToCart(data)}\r\n                >\r\n                  <i className=\"icon_bag_alt\" />\r\n                </Button>\r\n              </Tooltip>\r\n            </div>\r\n          ) : null}\r\n          {!productStyle || productStyle === \"one\" ? (\r\n            <>\r\n              <Tooltip\r\n                placement=\"left\"\r\n                title={\r\n                  productInWishlist ? \"Remove from wishlist\" : \"Add to wishlist\"\r\n                }\r\n              >\r\n                <Button\r\n                  className={`product-atw ${classNames({\r\n                    active: productInWishlist,\r\n                  })}`}\r\n                  type=\"text\"\r\n                  shape=\"circle\"\r\n                  onClick={() => onAddToWishlist(data)}\r\n                >\r\n                  <i className=\"icon_heart_alt\" />\r\n                </Button>\r\n              </Tooltip>\r\n\r\n              <Button onClick={showModal} className=\"product-qv\">\r\n                Quick view\r\n              </Button>\r\n            </>\r\n          ) : null}\r\n        </div>\r\n        <div className=\"product-content\">\r\n          <Link\r\n            href={process.env.PUBLIC_URL + `/product/[slug]`}\r\n            as={process.env.PUBLIC_URL + `/product/${data.slug}`}\r\n          >\r\n            <a className=\"product-name\">{data.name}</a>\r\n          </Link>\r\n          <div className=\"product-rate\">\r\n            <Rate defaultValue={data.rate} disabled />\r\n            <span className=\"product-rate-quantity\">(06)</span>\r\n          </div>\r\n          <div className=\"product-content__footer\">\r\n            <div className=\"product-content__footer-price\">\r\n              <h5 className=\"product-price\">\r\n                {data.discount\r\n                  ? formatCurrency(\r\n                      data.price - data.discount,\r\n                      locales,\r\n                      currency\r\n                    )\r\n                  : formatCurrency(data.price, locales, currency)}\r\n              </h5>\r\n              {data.discount && (\r\n                <span>{formatCurrency(data.price, locales, currency)}</span>\r\n              )}\r\n            </div>\r\n            {!productStyle || productStyle === \"one\" ? (\r\n              <Tooltip title=\"Add to cart\">\r\n                <Button\r\n                  disabled={avaiableQuantity === 0}\r\n                  className=\"product-atc\"\r\n                  type=\"text\"\r\n                  shape=\"circle\"\r\n                  onClick={() => onAddToCart(data)}\r\n                >\r\n                  <i className=\"icon_bag_alt\" />\r\n                </Button>\r\n              </Tooltip>\r\n            ) : null}\r\n          </div>\r\n          {productStyle === \"three\" ? (\r\n            <div className=\"product-button-group\">\r\n              <div className=\"product-button-group__wrapper\">\r\n                <Tooltip placement=\"top\" title=\"Quick view\">\r\n                  <Button onClick={showModal} shape=\"circle\">\r\n                    <i className=\"icon_search\" />\r\n                  </Button>\r\n                </Tooltip>\r\n                <Tooltip\r\n                  placement=\"top\"\r\n                  title={\r\n                    productInWishlist\r\n                      ? \"Remove from wishlist\"\r\n                      : \"Add to wishlist\"\r\n                  }\r\n                >\r\n                  <Button\r\n                    shape=\"circle\"\r\n                    className={`product-atw ${classNames({\r\n                      active: productInWishlist,\r\n                    })}`}\r\n                    onClick={() => onAddToWishlist(data)}\r\n                  >\r\n                    <i className=\"icon_heart_alt\" />\r\n                  </Button>\r\n                </Tooltip>\r\n                <Tooltip placement=\"top\" title=\"Add to cart\">\r\n                  <Button\r\n                    disabled={avaiableQuantity === 0}\r\n                    shape=\"circle\"\r\n                    onClick={() => onAddToCart(data)}\r\n                  >\r\n                    <i className=\"icon_bag_alt\" />\r\n                  </Button>\r\n                </Tooltip>\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n      <Modal\r\n        footer={null}\r\n        afterClose={handleCancel}\r\n        onCancel={handleCancel}\r\n        visible={visible}\r\n        width={850}\r\n      >\r\n        <ShopQuickView setModalVisible={setVisible} data={data} />\r\n      </Modal>\r\n    </>\r\n  ) : (\r\n    <Skeleton active />\r\n  );\r\n}\r\n\r\nexport default React.memo(Product);\r\n"]},"metadata":{},"sourceType":"module"}