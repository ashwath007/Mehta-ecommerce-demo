{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { v4 as uuidv4 } from \"uuid\";\nimport { CART } from \"../defines\";\nvar initialState = [];\nexport default function cartReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var cartItem = state.find(function (item) {\n    return item.cartId === action.cartId;\n  });\n  var cartItemIndex = cartItem && state.indexOf(cartItem);\n\n  switch (action.type) {\n    case CART.ADD_TO_CART:\n      var pVaration = action.product.variation || action.product.variation && action.product.variation.length > 0;\n      var pSize = action.product.size || action.product.size && action.product.size.length > 0;\n\n      if (!pVaration && !pSize) {\n        var addedCartItem = state.find(function (item) {\n          return item.id === action.product.id;\n        });\n        var addedCartItemIndex = addedCartItem && state.indexOf(addedCartItem);\n\n        if (!addedCartItem) {\n          return [].concat(_toConsumableArray(state), [_objectSpread(_objectSpread({}, action.product), {}, {\n            cartQuantity: action.quantity || 1,\n            cartId: uuidv4()\n          })]);\n        } else {\n          return [].concat(_toConsumableArray(state.slice(0, addedCartItemIndex)), [_objectSpread(_objectSpread({}, addedCartItem), {}, {\n            cartQuantity: action.quantity ? addedCartItem.cartQuantity + action.quantity : addedCartItem.cartQuantity + 1\n          })], _toConsumableArray(state.slice(addedCartItemIndex + 1)));\n        }\n      } else {\n        if (pVaration && !pSize) {\n          var addedCartItemColor = state.find(function (item) {\n            return item.id === action.product.id && item.selectedColor && item.selectedColor === action.color;\n          });\n          var addedCartItemColorIndex = addedCartItemColor && state.indexOf(addedCartItemColor);\n\n          if (!action.color || action.color === \"none\") {\n            if (!addedCartItemColor) {\n              return [].concat(_toConsumableArray(state), [_objectSpread(_objectSpread({}, action.product), {}, {\n                selectedColor: \"none\",\n                cartQuantity: action.quantity || 1,\n                cartId: uuidv4()\n              })]);\n            } else {\n              return [].concat(_toConsumableArray(state.slice(0, addedCartItemColorIndex)), [_objectSpread(_objectSpread({}, addedCartItemColor), {}, {\n                cartQuantity: action.quantity ? addedCartItemColor.cartQuantity + action.quantity : addedCartItemColor.cartQuantity + 1\n              })], _toConsumableArray(state.slice(addedCartItemColorIndex + 1)));\n            }\n          } else {\n            if (!addedCartItemColor) {\n              return [].concat(_toConsumableArray(state), [_objectSpread(_objectSpread({}, action.product), {}, {\n                cartQuantity: action.quantity || 1,\n                selectedColor: action.color,\n                cartId: uuidv4()\n              })]);\n            } else {\n              return [].concat(_toConsumableArray(state.slice(0, addedCartItemColorIndex)), [_objectSpread(_objectSpread({}, addedCartItemColor), {}, {\n                cartQuantity: action.quantity ? addedCartItemColor.cartQuantity + action.quantity : addedCartItemColor.cartQuantity + 1\n              })], _toConsumableArray(state.slice(addedCartItemColorIndex + 1)));\n            }\n          }\n        } else if (!pVaration && pSize) {\n          var addedCartItemSize = state.find(function (item) {\n            return item.id === action.product.id && item.selectedSize && item.selectedSize === action.size;\n          });\n          var addedCartItemSizeIndex = addedCartItemSize && state.indexOf(addedCartItemSize);\n\n          if (!action.size || action.size === \"none\") {\n            if (!addedCartItemSize) {\n              return [].concat(_toConsumableArray(state), [_objectSpread(_objectSpread({}, action.product), {}, {\n                selectedSize: \"none\",\n                cartQuantity: action.quantity || 1,\n                cartId: uuidv4()\n              })]);\n            } else {\n              return [].concat(_toConsumableArray(state.slice(0, addedCartItemSizeIndex)), [_objectSpread(_objectSpread({}, addedCartItemSize), {}, {\n                cartQuantity: action.quantity ? addedCartItemSize.cartQuantity + action.quantity : addedCartItemSize.cartQuantity + 1\n              })], _toConsumableArray(state.slice(addedCartItemSizeIndex + 1)));\n            }\n          } else {\n            if (!addedCartItemSize) {\n              return [].concat(_toConsumableArray(state), [_objectSpread(_objectSpread({}, action.product), {}, {\n                cartQuantity: action.quantity || 1,\n                selectedSize: action.size,\n                cartId: uuidv4()\n              })]);\n            } else {\n              return [].concat(_toConsumableArray(state.slice(0, addedCartItemSizeIndex)), [_objectSpread(_objectSpread({}, addedCartItemSize), {}, {\n                cartQuantity: action.quantity ? addedCartItemSize.cartQuantity + action.quantity : addedCartItemSize.cartQuantity + 1\n              })], _toConsumableArray(state.slice(addedCartItemSizeIndex + 1)));\n            }\n          }\n        } else if (pVaration && pSize) {\n          var addedCartItemSizeColor = state.find(function (item) {\n            return item.id === action.product.id && item.selectedSize && item.selectedSize === action.size && item.selectedColor && item.selectedColor === action.color;\n          });\n          var addedCartItemSizeColorIndex = addedCartItemSizeColor && state.indexOf(addedCartItemSizeColor);\n\n          if ((!action.color || action.color === \"none\") && (!action.size || action.size === \"none\")) {\n            if (!addedCartItemSizeColor) {\n              return [].concat(_toConsumableArray(state), [_objectSpread(_objectSpread({}, action.product), {}, {\n                selectedColor: \"none\",\n                selectedSize: \"none\",\n                cartQuantity: action.quantity || 1,\n                cartId: uuidv4()\n              })]);\n            } else {\n              return [].concat(_toConsumableArray(state.slice(0, addedCartItemSizeColorIndex)), [_objectSpread(_objectSpread({}, addedCartItemSizeColor), {}, {\n                cartQuantity: action.quantity ? addedCartItemSizeColor.cartQuantity + action.quantity : addedCartItemSizeColor.cartQuantity + 1\n              })], _toConsumableArray(state.slice(addedCartItemSizeColorIndex + 1)));\n            }\n          } else if (action.color && (!action.size || action.size === \"none\")) {\n            if (!addedCartItemSizeColor) {\n              return [].concat(_toConsumableArray(state), [_objectSpread(_objectSpread({}, action.product), {}, {\n                cartQuantity: action.quantity || 1,\n                selectedColor: action.color,\n                selectedSize: \"none\",\n                cartId: uuidv4()\n              })]);\n            } else {\n              return [].concat(_toConsumableArray(state.slice(0, addedCartItemSizeColorIndex)), [_objectSpread(_objectSpread({}, addedCartItemSizeColor), {}, {\n                cartQuantity: action.quantity ? addedCartItemSizeColor.cartQuantity + action.quantity : addedCartItemSizeColor.cartQuantity + 1\n              })], _toConsumableArray(state.slice(addedCartItemSizeColorIndex + 1)));\n            }\n          } else if (action.size && (!action.color || action.color === \"none\")) {\n            if (!addedCartItemSizeColor) {\n              return [].concat(_toConsumableArray(state), [_objectSpread(_objectSpread({}, action.product), {}, {\n                cartQuantity: action.quantity || 1,\n                selectedColor: \"none\",\n                selectedSize: action.size,\n                cartId: uuidv4()\n              })]);\n            } else {\n              return [].concat(_toConsumableArray(state.slice(0, addedCartItemSizeColorIndex)), [_objectSpread(_objectSpread({}, addedCartItemSizeColor), {}, {\n                cartQuantity: action.quantity ? addedCartItemSizeColor.cartQuantity + action.quantity : addedCartItemSizeColor.cartQuantity + 1\n              })], _toConsumableArray(state.slice(addedCartItemSizeColorIndex + 1)));\n            }\n          } else {\n            if (!addedCartItemSizeColor) {\n              return [].concat(_toConsumableArray(state), [_objectSpread(_objectSpread({}, action.product), {}, {\n                cartQuantity: action.quantity || 1,\n                selectedColor: action.color,\n                selectedSize: action.size,\n                cartId: uuidv4()\n              })]);\n            } else {\n              return [].concat(_toConsumableArray(state.slice(0, addedCartItemSizeColorIndex)), [_objectSpread(_objectSpread({}, addedCartItemSizeColor), {}, {\n                cartQuantity: action.quantity ? addedCartItemSizeColor.cartQuantity + action.quantity : addedCartItemSizeColor.cartQuantity + 1\n              })], _toConsumableArray(state.slice(addedCartItemSizeColorIndex + 1)));\n            }\n          }\n\n          return;\n        }\n      }\n\n    case CART.REMOVE_FROM_CART:\n      return [].concat(_toConsumableArray(state.slice(0, cartItemIndex)), _toConsumableArray(state.slice(cartItemIndex + 1)));\n\n    case CART.REMOVE_ALL_FROM_CART:\n      return [];\n\n    case CART.INCREASE_QUANTITY_CART:\n      return [].concat(_toConsumableArray(state.slice(0, cartItemIndex)), [_objectSpread(_objectSpread({}, cartItem), {}, {\n        cartQuantity: cartItem.cartQuantity + 1\n      })], _toConsumableArray(state.slice(cartItemIndex + 1)));\n\n    case CART.DECREASE_QUANTITY_CART:\n      if (cartItem.cartQuantity < 2) {\n        return;\n      }\n\n      return [].concat(_toConsumableArray(state.slice(0, cartItemIndex)), [_objectSpread(_objectSpread({}, cartItem), {}, {\n        cartQuantity: cartItem.cartQuantity - 1\n      })], _toConsumableArray(state.slice(cartItemIndex + 1)));\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["C:/Users/user/Downloads/stora-next-20220617T154210Z-001/stora-next/stora/src/redux/reducers/cartReducer.js"],"names":["v4","uuidv4","CART","initialState","cartReducer","state","action","cartItem","find","item","cartId","cartItemIndex","indexOf","type","ADD_TO_CART","pVaration","product","variation","length","pSize","size","addedCartItem","id","addedCartItemIndex","cartQuantity","quantity","slice","addedCartItemColor","selectedColor","color","addedCartItemColorIndex","addedCartItemSize","selectedSize","addedCartItemSizeIndex","addedCartItemSizeColor","addedCartItemSizeColorIndex","REMOVE_FROM_CART","REMOVE_ALL_FROM_CART","INCREASE_QUANTITY_CART","DECREASE_QUANTITY_CART"],"mappings":"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","sourcesContent":["import { v4 as uuidv4 } from \"uuid\";\r\n\r\nimport { CART } from \"../defines\";\r\n\r\nconst initialState = [];\r\n\r\nexport default function cartReducer(state = initialState, action) {\r\n  const cartItem = state.find((item) => item.cartId === action.cartId);\r\n  const cartItemIndex = cartItem && state.indexOf(cartItem);\r\n  switch (action.type) {\r\n    case CART.ADD_TO_CART:\r\n      const pVaration =\r\n        action.product.variation ||\r\n        (action.product.variation && action.product.variation.length > 0);\r\n      const pSize =\r\n        action.product.size ||\r\n        (action.product.size && action.product.size.length > 0);\r\n      if (!pVaration && !pSize) {\r\n        const addedCartItem = state.find(\r\n          (item) => item.id === action.product.id\r\n        );\r\n        const addedCartItemIndex =\r\n          addedCartItem && state.indexOf(addedCartItem);\r\n        if (!addedCartItem) {\r\n          return [\r\n            ...state,\r\n            {\r\n              ...action.product,\r\n              cartQuantity: action.quantity || 1,\r\n              cartId: uuidv4(),\r\n            },\r\n          ];\r\n        } else {\r\n          return [\r\n            ...state.slice(0, addedCartItemIndex),\r\n            {\r\n              ...addedCartItem,\r\n              cartQuantity: action.quantity\r\n                ? addedCartItem.cartQuantity + action.quantity\r\n                : addedCartItem.cartQuantity + 1,\r\n            },\r\n            ...state.slice(addedCartItemIndex + 1),\r\n          ];\r\n        }\r\n      } else {\r\n        if (pVaration && !pSize) {\r\n          const addedCartItemColor = state.find(\r\n            (item) =>\r\n              item.id === action.product.id &&\r\n              item.selectedColor &&\r\n              item.selectedColor === action.color\r\n          );\r\n          const addedCartItemColorIndex =\r\n            addedCartItemColor && state.indexOf(addedCartItemColor);\r\n          if (!action.color || action.color === \"none\") {\r\n            if (!addedCartItemColor) {\r\n              return [\r\n                ...state,\r\n                {\r\n                  ...action.product,\r\n                  selectedColor: \"none\",\r\n                  cartQuantity: action.quantity || 1,\r\n                  cartId: uuidv4(),\r\n                },\r\n              ];\r\n            } else {\r\n              return [\r\n                ...state.slice(0, addedCartItemColorIndex),\r\n                {\r\n                  ...addedCartItemColor,\r\n                  cartQuantity: action.quantity\r\n                    ? addedCartItemColor.cartQuantity + action.quantity\r\n                    : addedCartItemColor.cartQuantity + 1,\r\n                },\r\n                ...state.slice(addedCartItemColorIndex + 1),\r\n              ];\r\n            }\r\n          } else {\r\n            if (!addedCartItemColor) {\r\n              return [\r\n                ...state,\r\n                {\r\n                  ...action.product,\r\n                  cartQuantity: action.quantity || 1,\r\n                  selectedColor: action.color,\r\n                  cartId: uuidv4(),\r\n                },\r\n              ];\r\n            } else {\r\n              return [\r\n                ...state.slice(0, addedCartItemColorIndex),\r\n                {\r\n                  ...addedCartItemColor,\r\n                  cartQuantity: action.quantity\r\n                    ? addedCartItemColor.cartQuantity + action.quantity\r\n                    : addedCartItemColor.cartQuantity + 1,\r\n                },\r\n                ...state.slice(addedCartItemColorIndex + 1),\r\n              ];\r\n            }\r\n          }\r\n        } else if (!pVaration && pSize) {\r\n          const addedCartItemSize = state.find(\r\n            (item) =>\r\n              item.id === action.product.id &&\r\n              item.selectedSize &&\r\n              item.selectedSize === action.size\r\n          );\r\n          const addedCartItemSizeIndex =\r\n            addedCartItemSize && state.indexOf(addedCartItemSize);\r\n          if (!action.size || action.size === \"none\") {\r\n            if (!addedCartItemSize) {\r\n              return [\r\n                ...state,\r\n                {\r\n                  ...action.product,\r\n                  selectedSize: \"none\",\r\n                  cartQuantity: action.quantity || 1,\r\n                  cartId: uuidv4(),\r\n                },\r\n              ];\r\n            } else {\r\n              return [\r\n                ...state.slice(0, addedCartItemSizeIndex),\r\n                {\r\n                  ...addedCartItemSize,\r\n                  cartQuantity: action.quantity\r\n                    ? addedCartItemSize.cartQuantity + action.quantity\r\n                    : addedCartItemSize.cartQuantity + 1,\r\n                },\r\n                ...state.slice(addedCartItemSizeIndex + 1),\r\n              ];\r\n            }\r\n          } else {\r\n            if (!addedCartItemSize) {\r\n              return [\r\n                ...state,\r\n                {\r\n                  ...action.product,\r\n                  cartQuantity: action.quantity || 1,\r\n                  selectedSize: action.size,\r\n                  cartId: uuidv4(),\r\n                },\r\n              ];\r\n            } else {\r\n              return [\r\n                ...state.slice(0, addedCartItemSizeIndex),\r\n                {\r\n                  ...addedCartItemSize,\r\n                  cartQuantity: action.quantity\r\n                    ? addedCartItemSize.cartQuantity + action.quantity\r\n                    : addedCartItemSize.cartQuantity + 1,\r\n                },\r\n                ...state.slice(addedCartItemSizeIndex + 1),\r\n              ];\r\n            }\r\n          }\r\n        } else if (pVaration && pSize) {\r\n          const addedCartItemSizeColor = state.find(\r\n            (item) =>\r\n              item.id === action.product.id &&\r\n              item.selectedSize &&\r\n              item.selectedSize === action.size &&\r\n              item.selectedColor &&\r\n              item.selectedColor === action.color\r\n          );\r\n          const addedCartItemSizeColorIndex =\r\n            addedCartItemSizeColor && state.indexOf(addedCartItemSizeColor);\r\n          if (\r\n            (!action.color || action.color === \"none\") &&\r\n            (!action.size || action.size === \"none\")\r\n          ) {\r\n            if (!addedCartItemSizeColor) {\r\n              return [\r\n                ...state,\r\n                {\r\n                  ...action.product,\r\n                  selectedColor: \"none\",\r\n                  selectedSize: \"none\",\r\n                  cartQuantity: action.quantity || 1,\r\n                  cartId: uuidv4(),\r\n                },\r\n              ];\r\n            } else {\r\n              return [\r\n                ...state.slice(0, addedCartItemSizeColorIndex),\r\n                {\r\n                  ...addedCartItemSizeColor,\r\n                  cartQuantity: action.quantity\r\n                    ? addedCartItemSizeColor.cartQuantity + action.quantity\r\n                    : addedCartItemSizeColor.cartQuantity + 1,\r\n                },\r\n                ...state.slice(addedCartItemSizeColorIndex + 1),\r\n              ];\r\n            }\r\n          } else if (action.color && (!action.size || action.size === \"none\")) {\r\n            if (!addedCartItemSizeColor) {\r\n              return [\r\n                ...state,\r\n                {\r\n                  ...action.product,\r\n                  cartQuantity: action.quantity || 1,\r\n                  selectedColor: action.color,\r\n                  selectedSize: \"none\",\r\n                  cartId: uuidv4(),\r\n                },\r\n              ];\r\n            } else {\r\n              return [\r\n                ...state.slice(0, addedCartItemSizeColorIndex),\r\n                {\r\n                  ...addedCartItemSizeColor,\r\n                  cartQuantity: action.quantity\r\n                    ? addedCartItemSizeColor.cartQuantity + action.quantity\r\n                    : addedCartItemSizeColor.cartQuantity + 1,\r\n                },\r\n                ...state.slice(addedCartItemSizeColorIndex + 1),\r\n              ];\r\n            }\r\n          } else if (\r\n            action.size &&\r\n            (!action.color || action.color === \"none\")\r\n          ) {\r\n            if (!addedCartItemSizeColor) {\r\n              return [\r\n                ...state,\r\n                {\r\n                  ...action.product,\r\n                  cartQuantity: action.quantity || 1,\r\n                  selectedColor: \"none\",\r\n                  selectedSize: action.size,\r\n                  cartId: uuidv4(),\r\n                },\r\n              ];\r\n            } else {\r\n              return [\r\n                ...state.slice(0, addedCartItemSizeColorIndex),\r\n                {\r\n                  ...addedCartItemSizeColor,\r\n                  cartQuantity: action.quantity\r\n                    ? addedCartItemSizeColor.cartQuantity + action.quantity\r\n                    : addedCartItemSizeColor.cartQuantity + 1,\r\n                },\r\n                ...state.slice(addedCartItemSizeColorIndex + 1),\r\n              ];\r\n            }\r\n          } else {\r\n            if (!addedCartItemSizeColor) {\r\n              return [\r\n                ...state,\r\n                {\r\n                  ...action.product,\r\n                  cartQuantity: action.quantity || 1,\r\n                  selectedColor: action.color,\r\n                  selectedSize: action.size,\r\n                  cartId: uuidv4(),\r\n                },\r\n              ];\r\n            } else {\r\n              return [\r\n                ...state.slice(0, addedCartItemSizeColorIndex),\r\n                {\r\n                  ...addedCartItemSizeColor,\r\n                  cartQuantity: action.quantity\r\n                    ? addedCartItemSizeColor.cartQuantity + action.quantity\r\n                    : addedCartItemSizeColor.cartQuantity + 1,\r\n                },\r\n                ...state.slice(addedCartItemSizeColorIndex + 1),\r\n              ];\r\n            }\r\n          }\r\n          return;\r\n        }\r\n      }\r\n    case CART.REMOVE_FROM_CART:\r\n      return [\r\n        ...state.slice(0, cartItemIndex),\r\n        ...state.slice(cartItemIndex + 1),\r\n      ];\r\n    case CART.REMOVE_ALL_FROM_CART:\r\n      return [];\r\n    case CART.INCREASE_QUANTITY_CART:\r\n      return [\r\n        ...state.slice(0, cartItemIndex),\r\n        { ...cartItem, cartQuantity: cartItem.cartQuantity + 1 },\r\n        ...state.slice(cartItemIndex + 1),\r\n      ];\r\n    case CART.DECREASE_QUANTITY_CART:\r\n      if (cartItem.cartQuantity < 2) {\r\n        return;\r\n      }\r\n      return [\r\n        ...state.slice(0, cartItemIndex),\r\n        { ...cartItem, cartQuantity: cartItem.cartQuantity - 1 },\r\n        ...state.slice(cartItemIndex + 1),\r\n      ];\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}